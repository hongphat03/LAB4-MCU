/*
 * fsm_manual.c
 *
 *  Created on: Dec 3, 2022
 *      Author: Hong Phat
 */

#ifndef SRC_FSM_MANUAL_C_
#define SRC_FSM_MANUAL_C_

#include "fsm_manual.h"
void fsm_manual_run(){
	switch(status){
			case MANUAL_RED:
				HAL_GPIO_WritePin(GPIOA,GPIO_PIN_3,0);
				HAL_GPIO_WritePin(GPIOA,GPIO_PIN_4,1);
				HAL_GPIO_WritePin(GPIOA,GPIO_PIN_5,1);
				HAL_GPIO_WritePin(GPIOA,GPIO_PIN_10,0);
				HAL_GPIO_WritePin(GPIOA,GPIO_PIN_11,1);
				HAL_GPIO_WritePin(GPIOA,GPIO_PIN_12,1);
				button1_flag = 0;
//				if(isButton1Pressed() == 1){
//					// if button is pressed, mode is changed to mode 2 ( modify time for red led)
//					status = MODIFY_RED;
//					status2 = MODIFY_RED;
//					HAL_GPIO_WritePin(GPIOA,GPIO_PIN_3,1);
//					HAL_GPIO_WritePin(GPIOA,GPIO_PIN_10,1);
//					// turn off two led red
//					set_timer = 1;
//					// value of time duration is in a range of 1 - 99
//					setTimer2(500);
//					// set timer for led blinky
//				}
				if(isButton2Pressed()==1){
					status = MANUAL_GREEN;
					status2 = MANUAL_GREEN;
				}
				break;
			case MANUAL_YELLOW:
				HAL_GPIO_WritePin(GPIOA,GPIO_PIN_3,1);
				HAL_GPIO_WritePin(GPIOA,GPIO_PIN_4,0);
				HAL_GPIO_WritePin(GPIOA,GPIO_PIN_5,1);
				HAL_GPIO_WritePin(GPIOA,GPIO_PIN_10,1);
				HAL_GPIO_WritePin(GPIOA,GPIO_PIN_11,0);
				HAL_GPIO_WritePin(GPIOA,GPIO_PIN_12,1);
//				if(isButton1Pressed() == 1){
//					// if button is pressed, mode is changed to mode 2 ( modify time for red led)
//					status = MODIFY_RED;
//					status2 = MODIFY_RED;
//					HAL_GPIO_WritePin(GPIOA,GPIO_PIN_3,1);
//					HAL_GPIO_WritePin(GPIOA,GPIO_PIN_10,1);
//					// turn off two led red
//					set_timer = 1;
//					setTimer2(500);
//					// set timer for led blinky
//				}
				if(isButton2Pressed()==1){
					status = MANUAL_RED;
					status2 = MANUAL_RED;
				}
				break;
			case MANUAL_GREEN:
				HAL_GPIO_WritePin(GPIOA,GPIO_PIN_3,1);
				HAL_GPIO_WritePin(GPIOA,GPIO_PIN_4,1);
				HAL_GPIO_WritePin(GPIOA,GPIO_PIN_5,0);
				HAL_GPIO_WritePin(GPIOA,GPIO_PIN_10,1);
				HAL_GPIO_WritePin(GPIOA,GPIO_PIN_11,1);
				HAL_GPIO_WritePin(GPIOA,GPIO_PIN_12,0);
//				if(isButton1Pressed() == 1){
//					// if button is pressed, mode is changed to mode 2 ( modify time for red led)
//					status = MODIFY_RED;
//					status2 = MODIFY_RED;
//					HAL_GPIO_WritePin(GPIOA,GPIO_PIN_3,1);
//					HAL_GPIO_WritePin(GPIOA,GPIO_PIN_10,10);
//					// turn off two led red
//					set_timer = 1;
//					setTimer2(500);
//					// set timer for led blinky
//				}
				if(isButton2Pressed()==1){
					status = MANUAL_YELLOW;
					status2 = MANUAL_YELLOW;
				}
				break;
		}

}


#endif /* SRC_FSM_MANUAL_C_ */
